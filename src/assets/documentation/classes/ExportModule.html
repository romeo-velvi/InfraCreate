<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>InfraCreate documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">InfraCreate documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Digita per avviare la ricerca"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Classi</li>
  <li >ExportModule</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/application/export/exportModule.ts</code>
        </p>


            <p class="comment">
                <h3>Descrizione</h3>
            </p>
            <p class="comment">
                <p>Classe che ha lo scopo di convertire il modulo nel formato YAML (standard TOSCA).</p>

            </p>




            <section>
    <h3 id="index">Indice</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Proprietà</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#dataEditor" >dataEditor</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#module" >module</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#virtualMachines" >virtualMachines</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Metodi</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#convertModule" >convertModule</a>
                            </li>
                            <li>
                                <a href="#findNode" >findNode</a>
                            </li>
                            <li>
                                <a href="#getHostExport" >getHostExport</a>
                            </li>
                            <li>
                                <a href="#getModuleExport" >getModuleExport</a>
                            </li>
                            <li>
                                <a href="#getNetworkExport" >getNetworkExport</a>
                            </li>
                            <li>
                                <a href="#getSubnetExport" >getSubnetExport</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Costruttore</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(module: <a href="../classes/ModuleApplication.html" target="_self">ModuleApplication</a>, dataEditor: <a href="https://angular.io/api/router/Data" target="_blank">Data</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Definito in <a href="" data-line="28" class="link-to-prism">src/app/services/application/export/exportModule.ts:28</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Costruttore classe ExportModule</p>
</div>
                            <div>
                                    <b>Parametri :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Nome</td>
                                                    <td>Tipo</td>
                                                <td>Opzionale</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>module</td>
                                                  
                                                        <td>
                                                                        <code><a href="../classes/ModuleApplication.html" target="_self" >ModuleApplication</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>dataEditor</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/router/Data" target="_blank" >Data</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="inputs">
        Proprietà
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dataEditor"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>dataEditor</b></span>
                        <a href="#dataEditor"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Tipo : </i>        <code><a href="https://angular.io/api/router/Data" target="_blank" >Data</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Definito in <a href="" data-line="22" class="link-to-prism">src/app/services/application/export/exportModule.ts:22</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Variabile che ha lo scopo di memorizzare i dati dell&#39;editor fornito al costruttore.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="module"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>module</b></span>
                        <a href="#module"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Tipo : </i>        <code><a href="../classes/ModuleApplication.html" target="_self" >ModuleApplication</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Definito in <a href="" data-line="17" class="link-to-prism">src/app/services/application/export/exportModule.ts:17</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Variabile che ha lo scopo di memorizzare il modulo fornito al costruttore.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="virtualMachines"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>virtualMachines</b></span>
                        <a href="#virtualMachines"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Tipo : </i>        <code><a href="../classes/VirtualMachine.html" target="_self" >VirtualMachine[]</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Valore predefinito : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Definito in <a href="" data-line="28" class="link-to-prism">src/app/services/application/export/exportModule.ts:28</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Variabile di supporto.
Usata per ottimizzare la parte di inserimento delle virtual machine nel ModuleSimpleData.
See {getHostExport}</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

            <section>
    
    <h3 id="methods">
        Metodi
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="convertModule"></a>
                    <span class="name">
                        <span ><b>convertModule</b></span>
                        <a href="#convertModule"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>convertModule()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definito in <a href="" data-line="50"
                            class="link-to-prism">src/app/services/application/export/exportModule.ts:50</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Funzione che si occupa del parsing del modulo in formato adattabile all&#39;export dello YAML.</p>
<ol>
<li>Inizia assegnando i valori alle variabili che possono essere semplicemente dedotte dal modulo fornito nel costruttore.</li>
<li>Prende i dati forniti dell&#39;editor e itera su questi: in base al tipo richiama la funzione che restituisce il nodo parsed come oggetto YAML.
See {ModuleExport}
See {getHostExport}
See {getSubnetExport}
See {getNetworkExport}</li>
</ol>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/ModuleExport.html" target="_self" >ModuleExport</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findNode"></a>
                    <span class="name">
                        <span ><b>findNode</b></span>
                        <a href="#findNode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>findNode(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definito in <a href="" data-line="316"
                            class="link-to-prism">src/app/services/application/export/exportModule.ts:316</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Funzone che serve per trovare il nodo partendo dal nome all&#39;interno dei dati del canvas.</p>
</div>

                    <div class="io-description">
                        <b>Parametri :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Nome</td>
                                    <td>Tipo</td>
                                    <td>Opzionale</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>name</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>NodeData</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getHostExport"></a>
                    <span class="name">
                        <span ><b>getHostExport</b></span>
                        <a href="#getHostExport"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getHostExport(node: NodeData)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definito in <a href="" data-line="92"
                            class="link-to-prism">src/app/services/application/export/exportModule.ts:92</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Funzione di parsing dell&#39;host e delle porte.</p>
<ol>
<li>Controlla le porte di output per le connessioni in uscita.</li>
<li>Itera sulle connessioni (porte i/o) e controlla le connessioni depends_on (subnet) e contained_in (network)
See {virtualMachines}</li>
</ol>
</div>

                    <div class="io-description">
                        <b>Parametri :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Nome</td>
                                    <td>Tipo</td>
                                    <td>Opzionale</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                            <code>NodeData</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getModuleExport"></a>
                    <span class="name">
                        <span ><b>getModuleExport</b></span>
                        <a href="#getModuleExport"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getModuleExport()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definito in <a href="" data-line="241"
                            class="link-to-prism">src/app/services/application/export/exportModule.ts:241</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Funzione di parsing del modulo. Creazione dell&#39;elemento modulo nel node_template.</p>
<ol>
<li>Valorizza i dati che sono direttamente reperibili dalle informazioni del Modulo.</li>
<li>Salva le virtual_machine @see {virtualMachines}</li>
<li>Inserimento delle interfacce consumer/provisor del modulo.</li>
</ol>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type</code>

                    </div>
                    <div class="io-description">
                        <p>: ModuleSimpleData }</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNetworkExport"></a>
                    <span class="name">
                        <span ><b>getNetworkExport</b></span>
                        <a href="#getNetworkExport"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getNetworkExport(network: NodeData)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definito in <a href="" data-line="217"
                            class="link-to-prism">src/app/services/application/export/exportModule.ts:217</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Funzione di parsing del network.</p>
<ol>
<li>Valorizza solamente i dati che sono direttamente reperibili dalle informazioni del nodo.</li>
</ol>
</div>

                    <div class="io-description">
                        <b>Parametri :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Nome</td>
                                    <td>Tipo</td>
                                    <td>Opzionale</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>network</td>
                                    <td>
                                            <code>NodeData</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSubnetExport"></a>
                    <span class="name">
                        <span ><b>getSubnetExport</b></span>
                        <a href="#getSubnetExport"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getSubnetExport(subnet: NodeData)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definito in <a href="" data-line="180"
                            class="link-to-prism">src/app/services/application/export/exportModule.ts:180</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Funzione di parsing della subnet.</p>
<ol>
<li>Valorizza i dati che sono direttamente reperibili dalle informazioni del nodo.</li>
<li>Controlla le porte di output (connesisoni) che si collegano con la network per le relazioni contained_in.</li>
</ol>
</div>

                    <div class="io-description">
                        <b>Parametri :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Nome</td>
                                    <td>Tipo</td>
                                    <td>Opzionale</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>subnet</td>
                                    <td>
                                            <code>NodeData</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Data, InputData, NodeData, NodesData, OutputData } from &quot;rete/types/core/data&quot;;
import { EnumNodeType, InterfacePortType } from &quot;src/app/models/appType&quot;;
import { ModuleApplication } from &quot;../../modelsApplication/applicationModels&quot;;
import { ModuleExport, ModuleSimpleData, NetworkSimpleData, NodeSimpleData, PortSimpleData, PropertiesMSD, PropertiesSSD, SubnetSimpleData, VirtualMachine, VirtualMachinePorts } from &quot;../../modelsExport/moduleExport&quot;;
import { ModeTypeExport, ModuleTypeExport, NetworkTypeExport, NodeTypeExport, PortTypeExport, RelationshipsTypeExport, SubnetTypeExport, ToscaDefinitionType } from &quot;../../modelsExport/TypeExport&quot;;


/**
 * Classe che ha lo scopo di convertire il modulo nel formato YAML (standard TOSCA).
 */
export class ExportModule {

    /**
     * Variabile che ha lo scopo di memorizzare il modulo fornito al costruttore.
     * @type {ModuleApplication}
     */
    protected module: ModuleApplication
    /**
     * Variabile che ha lo scopo di memorizzare i dati dell&#x27;editor fornito al costruttore.
     * @type {Data}
     */
    protected dataEditor: Data
    /**
     * Variabile di supporto.
     * Usata per ottimizzare la parte di inserimento delle virtual machine nel ModuleSimpleData. 
     * @see {getHostExport}
     */
    protected virtualMachines: VirtualMachine[] &#x3D; []; 

    /**
     * Costruttore classe ExportModule
     * @param module 
     * @param dataEditor 
     */
    constructor(module: ModuleApplication, dataEditor: Data) {
        this.module &#x3D; module;
        this.dataEditor &#x3D; dataEditor;
    }

    /**
     * Funzione che si occupa del parsing del modulo in formato adattabile all&#x27;export dello YAML.
     * 1) Inizia assegnando i valori alle variabili che possono essere semplicemente dedotte dal modulo fornito nel costruttore.
     * 2) Prende i dati forniti dell&#x27;editor e itera su questi: in base al tipo richiama la funzione che restituisce il nodo parsed come oggetto YAML.
     * @return {ModuleExport}
     * @see {ModuleExport} 
     * @see {getHostExport}
     * @see {getSubnetExport}
     * @see {getNetworkExport}
     */
    convertModule(): ModuleExport {
        let me: ModuleExport &#x3D; new ModuleExport();
        me.tosca_definitions_version &#x3D; ToscaDefinitionType.cloudify;
        me.description &#x3D; this.module.description;
        me.imports &#x3D; this.module.imports;
        // node_Tempates
        let nt: { [name: string]: ModuleSimpleData | NodeSimpleData | PortSimpleData | NetworkSimpleData | SubnetSimpleData } &#x3D; {};
        // inizia a prendere i nodi del modulo
        for (let key in this.dataEditor.nodes) {
            let element: NodeData &#x3D; this.dataEditor.nodes[key];
            if (element.data.type &#x3D;&#x3D;&#x3D; EnumNodeType.Host) {
                nt &#x3D; Object.assign({}, nt, this.getHostExport(element));
            }
            else if (element.data.type &#x3D;&#x3D;&#x3D; EnumNodeType.Subnet) {
                nt &#x3D; { ...nt, ...this.getSubnetExport(element) }
            }
            else if (element.data.type &#x3D;&#x3D;&#x3D; EnumNodeType.Network) {
                nt &#x3D; { ...nt, ...this.getNetworkExport(element) }
            }
            else {
                console.warn(&quot;Module type not recognized&quot;);
                continue;
            }
        }
        // inserimento del modulo nei templates // deve essere fatto dopo che tutti i moduli sono stati completati -&gt; guardare this.virtualMachines
        nt &#x3D; { ...nt, ...this.getModuleExport() }

        me.node_templates &#x3D; nt;

        return me;
    }



    /**
     * Funzione di parsing dell&#x27;host e delle porte.
     * 1) Controlla le porte di output per le connessioni in uscita.
     * 2) Itera sulle connessioni (porte i/o) e controlla le connessioni depends_on (subnet) e contained_in (network)
     * @param node 
     * @return { { [name: string]: NodeSimpleData | PortSimpleData }}
     * @see {virtualMachines}
     */
    getHostExport(node: NodeData): { [name: string]: NodeSimpleData | PortSimpleData } {

        //serve al ModuleSimpleData
        let MSDvm: VirtualMachine &#x3D; { 
            virtual_machine: node.data.name as unknown as string, 
            ports: [] 
        };
        let index: number &#x3D; -1;

        // get node
        let singleNode: { [name: string]: NodeSimpleData } &#x3D; {}
        let nodeSimpleData: NodeSimpleData &#x3D; {
            type: NodeTypeExport.Host,
            properties: undefined,
            interfaces: undefined,
            relationships: []
        };
        // node relation -&gt; port # per ora solo le connessioni con le porte
        (node.data.Output as []).forEach(
            (out) &#x3D;&gt; {
                nodeSimpleData.relationships.push(
                    { type: RelationshipsTypeExport.connect_port, target: out }
                )
            }
        )
        singleNode[node.data.name as unknown as string] &#x3D; nodeSimpleData;



        // get node ports
        let ports: { [name: string]: PortSimpleData } &#x3D; {};
        for (let portName in node.outputs) {

            MSDvm.ports[++index] &#x3D; {
                port: portName,
                network: &quot;&quot;,
                subnets: [],
            };

            let nodePort: OutputData &#x3D; node.outputs[portName];
            let portSimpleData: PortSimpleData &#x3D; {
                type: PortTypeExport.Port,
                relationships: []
            }
            // port relation -&gt; net &amp; sub # controllo ambo contained_in (net) e dependes_on (sub)
            nodePort.connections.forEach(c &#x3D;&gt; {
                // prima depends_on
                let subnetLinkedToPort: NodeData &#x3D; this.dataEditor.nodes[c.node];
                portSimpleData.relationships.push(
                    { type: RelationshipsTypeExport.depends_on, target: subnetLinkedToPort.data.name as unknown as string }
                );
                MSDvm.ports[index].subnets.push({ subnet: subnetLinkedToPort.data.name as unknown as string });
                // poi contained_in
                for (let key in subnetLinkedToPort.outputs) {
                    let subnetPort: OutputData &#x3D; subnetLinkedToPort.outputs[key];
                    // controllo network connesso alla sub.
                    subnetPort.connections.forEach(c &#x3D;&gt; {
                        let networkConnectedToSubnet: NodeData &#x3D; this.dataEditor.nodes[c.node];
                        portSimpleData.relationships.push(
                            { type: RelationshipsTypeExport.contained_in, target: networkConnectedToSubnet.data.name as unknown as string }
                        );
                        MSDvm.ports[index].network &#x3D; networkConnectedToSubnet.data.name as unknown as string;
                    })
                }

            })

            ports[portName] &#x3D; portSimpleData;
        }

        let out: { [name: string]: NodeSimpleData | PortSimpleData } &#x3D; {};
        out &#x3D; Object.assign({}, singleNode, ports);


        this.virtualMachines.push(MSDvm);

        return out;
    }



    /**
     * Funzione di parsing della subnet.
     * 1) Valorizza i dati che sono direttamente reperibili dalle informazioni del nodo.
     * 2) Controlla le porte di output (connesisoni) che si collegano con la network per le relazioni contained_in.
     * @param subnet 
     * @returns {{ [name: string]: SubnetSimpleData }}
     */
    getSubnetExport(subnet: NodeData): { [name: string]: SubnetSimpleData } {
        // get subnet
        let singleSubnet: { [name: string]: SubnetSimpleData } &#x3D; {}
        let subnetSimpleData: SubnetSimpleData &#x3D; {
            type: SubnetTypeExport.Subnet,
            relationships: [],
            properties: {
                openstack_config: null,
                use_external_resource: false,
                subnet: {
                    ip_version: subnet.data.version as unknown as number,
                    cidr: subnet.data.cidr as unknown as string,
                    enable_dhcp: subnet.data.isDhcp as unknown as boolean,
                    gateway_ip: null
                }
            }
        };
        // subnet relation -&gt; network (only contained in)
        (subnet.data.Output as []).forEach(
            (out) &#x3D;&gt; {
                subnetSimpleData.relationships.push(
                    { type: RelationshipsTypeExport.contained_in, target: out }
                )
            }
        )
        singleSubnet[subnet.data.name as unknown as string] &#x3D; subnetSimpleData;

        return singleSubnet;
    }


    /**
     * Funzione di parsing del network.
     * 1) Valorizza solamente i dati che sono direttamente reperibili dalle informazioni del nodo.
     * @param subnet 
     * @returns {{ [name: string]: NetworkSimpleData }}
     */
    getNetworkExport(network: NodeData): { [name: string]: NetworkSimpleData } {
        // get subnet
        let singleNetwork: { [name: string]: NetworkSimpleData } &#x3D; {}
        let networkSimpleData: NetworkSimpleData &#x3D; {
            type: NetworkTypeExport.Network,
            properties: {
                openstack_config: null,
                use_external_resource: false,
            }
        };

        singleNetwork[network.data.name as unknown as string] &#x3D; networkSimpleData;

        return singleNetwork;
    }


    /**
     * Funzione di parsing del modulo. Creazione dell&#x27;elemento modulo nel node_template.
     * 1) Valorizza i dati che sono direttamente reperibili dalle informazioni del Modulo.
     * 2) Salva le virtual_machine @see {virtualMachines}
     * 3) Inserimento delle interfacce consumer/provisor del modulo.
     * @returns { [name: string]: ModuleSimpleData }
     */
    getModuleExport(): { [name: string]: ModuleSimpleData } {
        let moduleExport: { [name: string]: ModuleSimpleData } &#x3D; {}
        let moduleSimpleData: ModuleSimpleData &#x3D; {
            type: ModuleTypeExport[this.module.type]?ModuleTypeExport[this.module.type]:ModuleTypeExport[0],
            properties: {
                mode: ModeTypeExport.managed,
                description: this.module.description,
                version: this.module.version as number,
                constraints: {
                    interface_constraints: [],
                    module_constraints: [],
                    network_constraints: []
                },
                interface_networks: {
                    providers: [],
                    consumers: []
                },
                virtual_machines: this.virtualMachines ? this.virtualMachines : null, // per il come si è reperito -&gt; guardare this.virtualMachines
            }
        };

        // inserisco interfacce consumer/privisor
        let index: number &#x3D; null;
        let indexC: number &#x3D; -1;
        let indexP: number &#x3D; -1;
        let type: string &#x3D; null;
        this.module.interfaces.forEach(i &#x3D;&gt; {
            if (i.type &#x3D;&#x3D;&#x3D; InterfacePortType.CONSUMER) {
                type &#x3D; &quot;consumers&quot;;
                index &#x3D; ++indexC;
            }
            else if (i.type &#x3D;&#x3D;&#x3D; InterfacePortType.PRODUCER) {
                type &#x3D; &quot;providers&quot;
                index &#x3D; ++indexP;
            }
            else {
                type &#x3D; null;
                console.warn(&quot;type not recognized&quot;)
                index &#x3D; null;
                return;
            };
            moduleSimpleData.properties.interface_networks[type].push(
                {
                    interface: i.nodeName,
                    tag: i.nodeName,
                    network: i.network.name,
                    subnets: []
                }
            )
            // prende le network + subnet ad esso connesse (se sono connesse)
            let network: NodeData &#x3D; this.findNode(i.network.name);
            if (network) {
                for (let key in network.inputs) {
                    let networkInputPort: InputData &#x3D; network.inputs[key];
                    networkInputPort.connections.forEach(c &#x3D;&gt; {
                        let subnet: NodeData &#x3D; this.dataEditor.nodes[c.node];
                        moduleSimpleData.properties.interface_networks[type][index].subnets.push(
                            { subnet: subnet.data.name as unknown as string }
                        )
                    })
                }
            }
            index++;
        })

        moduleExport[this.module.name] &#x3D; moduleSimpleData;

        return moduleExport;
    }

    /**
     * Funzone che serve per trovare il nodo partendo dal nome all&#x27;interno dei dati del canvas.
     * @param name 
     * @returns {NodeData}
     */
    findNode(name: string): NodeData {
        let n: NodeData &#x3D; undefined
        for (let key in this.dataEditor.nodes) {
            let node: NodeData &#x3D; this.dataEditor.nodes[key];
            if ((node.data.name as unknown as string) &#x3D;&#x3D;&#x3D; name) {
                n &#x3D; node;
                break;
            }
        }
        return n
    }

}</code></pre>
    </div>
</div>









                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> corrispondenza "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">Nessun risultato corrispondente "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'ExportModule.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
